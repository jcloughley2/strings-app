// ============================================================================
// EMBEDDED VARIABLES STYLING
// ============================================================================
// This file contains all styling for embedded variables as they appear
// in the string canvas. Edit these styles to customize the appearance of
// string variables and conditional variables.
// ============================================================================

// ----------------------------------------------------------------------------
// TINT/SHADE FUNCTIONS
// ----------------------------------------------------------------------------
// Tint/Shade functions using mix() for solid colors (no transparency)
// Based on: https://css-tricks.com/snippets/sass/tint-shade-functions/
// IMPORTANT: Must be defined BEFORE base colors to be used in :root
@function tint($color, $percentage) {
  @return mix(white, $color, $percentage);
}

@function shade($color, $percentage) {
  @return mix(black, $color, $percentage);
}

// ----------------------------------------------------------------------------
// BASE COLORS - Edit these to change the entire color scheme
// ----------------------------------------------------------------------------
// String variables (currently blue, but change to any color you want)
$string-var-color: blue; // Base border color for string variables
$string-text-color: black;     // Text color for string variables

// Conditional variables (currently gold, but change to any color you want)
$conditional-var-color: purple; // Base border color for conditional variables
$conditional-text-color: black;     // Text color for conditional variables

// Pending/New variable indicator color
$pending-var-color: mediumpurple; // Color for sparkles icon on pending/new variables

// Export colors as CSS custom properties for use throughout the app
:root {
  // String variable colors
  --string-var-color: #{$string-var-color};
  --string-var-text: #{$string-text-color};
  --string-var-50: #{tint($string-var-color, 90%)};   // Very light background
  --string-var-100: #{tint($string-var-color, 80%)};  // Light background
  --string-var-200: #{tint($string-var-color, 70%)};  // Border
  --string-var-600: #{shade($string-var-color, 20%)}; // Icons
  --string-var-700: #{shade($string-var-color, 30%)}; // Text
  
  // Conditional variable colors
  --conditional-var-color: #{$conditional-var-color};
  --conditional-var-text: #{$conditional-text-color};
  --conditional-var-50: #{tint($conditional-var-color, 90%)};   // Very light background
  --conditional-var-100: #{tint($conditional-var-color, 80%)};  // Light background
  --conditional-var-200: #{tint($conditional-var-color, 70%)};  // Border
  --conditional-var-600: #{shade($conditional-var-color, 20%)}; // Icons
  --conditional-var-700: #{shade($conditional-var-color, 30%)}; // Text
  
  // Pending/New variable colors
  --pending-var-color: #{$pending-var-color};
  --pending-var-50: #{tint($pending-var-color, 90%)};   // Very light background
  --pending-var-200: #{tint($pending-var-color, 70%)};  // Border
}

// ----------------------------------------------------------------------------
// VARIABLE HASH BADGE
// ----------------------------------------------------------------------------
// Unified styling for variable hash badges displayed throughout the app
// Used in: canvas, drawer header, embedded variables, spawn lists, etc.
// ----------------------------------------------------------------------------

.variable-hash-badge {
  // Layout
  display: inline-flex;
  align-items: center;
  gap: 0.25rem; // Space between icon and text
  padding: 0.25rem 0.5rem;
  
  // Typography
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 0.75rem; // text-xs
  font-weight: 500;
  
  // Colors - Neutral styling (default)
  background-color: rgb(249 250 251); // bg-gray-50
  color: rgb(55 65 81); // text-gray-700
  border: 1px solid rgb(229 231 235); // border-gray-200
  border-radius: 0.375rem; // rounded-md
  
  // Interaction
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  
  &:hover {
    background-color: rgb(243 244 246); // hover:bg-gray-100
    border-color: rgb(209 213 219); // hover:border-gray-300
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  &:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
}

// String variable variant - gradient with string color
.variable-hash-badge-string {
  background: linear-gradient(135deg, 
    tint($string-var-color, 85%) 0%,
    rgb(249 250 251) 100%
  );
  border-color: tint($string-var-color, 60%);
  
  &:hover {
    background: linear-gradient(135deg, 
      tint($string-var-color, 75%) 0%,
      rgb(243 244 246) 100%
    );
    border-color: tint($string-var-color, 50%);
  }
}

// Conditional variable variant - gradient with conditional color
.variable-hash-badge-conditional {
  background: linear-gradient(135deg, 
    tint($conditional-var-color, 85%) 0%,
    rgb(249 250 251) 100%
  );
  border-color: tint($conditional-var-color, 60%);
  
  &:hover {
    background: linear-gradient(135deg, 
      tint($conditional-var-color, 75%) 0%,
      rgb(243 244 246) 100%
    );
    border-color: tint($conditional-var-color, 50%);
  }
}

.variable-hash-badge-icon {
  width: 0.75rem; // h-3
  height: 0.75rem; // w-3
  flex-shrink: 0;
}

// ----------------------------------------------------------------------------
// STRING VARIABLES
// ----------------------------------------------------------------------------
// These styles apply to regular string variables embedded in other strings.
// The system uses progressive tinting based on same-type nesting depth.
// Tinting only increases when a string variable is nested within another string.
// When a string variable is nested within a conditional variable, tinting resets to 0.
// ----------------------------------------------------------------------------

// Base styles for all string variables (all depth levels)
[class*="embedded-var-string-"] {
  color: $string-text-color;
  border-color: transparent; // Always base color
  padding: 0px 0 4px;
  &::before {
    background-color: $string-var-color; // Always base color
  }
}

// Depth-specific hover backgrounds only
.embedded-var-string-0:hover { background-color: tint($string-var-color, 70%); } // Very light
.embedded-var-string-1:hover { background-color: tint($string-var-color, 60%); } // Slightly darker
.embedded-var-string-2:hover { background-color: tint($string-var-color, 50%); } // Medium
.embedded-var-string-3:hover { background-color: tint($string-var-color, 40%); } // Darker
.embedded-var-string-4:hover { background-color: tint($string-var-color, 30%); } // Darkest

// ----------------------------------------------------------------------------
// CONDITIONAL VARIABLES
// ----------------------------------------------------------------------------
// These styles apply to conditional variables embedded in other strings.
// The system uses progressive tinting based on same-type nesting depth.
// Tinting only increases when a conditional variable is nested within another conditional.
// When a conditional variable is nested within a string variable, tinting resets to 0.
// ----------------------------------------------------------------------------

// Base styles for all conditional variables (all depth levels)
[class*="embedded-var-conditional-"] {
  color: $conditional-text-color;
  border-color: transparent; // Always base color
  padding: 0px 8px 4px;

  &::before {
    background-color: $conditional-var-color; // Always base color
  }
}

// Depth-specific hover backgrounds only
.embedded-var-conditional-0:hover { background-color: tint($conditional-var-color, 70%); } // Very light
.embedded-var-conditional-1:hover { background-color: tint($conditional-var-color, 60%); } // Slightly darker
.embedded-var-conditional-2:hover { background-color: tint($conditional-var-color, 50%); } // Medium
.embedded-var-conditional-3:hover { background-color: tint($conditional-var-color, 40%); } // Darker
.embedded-var-conditional-4:hover { background-color: tint($conditional-var-color, 30%); } // Darkest

// ----------------------------------------------------------------------------
// SHARED BASE STYLES
// ----------------------------------------------------------------------------
// Common styles applied to all embedded variables regardless of type
// ----------------------------------------------------------------------------

.embedded-var {
  // Layout
  border-width: 0px 0px 4px;
  display: inline-block;
  margin-left: 0px; // ml-1
  border-style: solid;
  border-radius: 0; // rounded
  box-sizing: border-box;
  line-height: 24px;
  position: relative;
  border-radius: 4px;

  
  // Interaction
  cursor: pointer;
  transition-property: color, background-color, border-color;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
  
  // Typography
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;

  &::before {
    content: "";
    height: 4px;
    width: 100%;
    left: 0;
    position: absolute;
    bottom: -4px;
    display: inline-block;
    z-index: 1;
    border-radius: 4px;
    border-width: 0;
  }
}

// ----------------------------------------------------------------------------
// BADGE MODE STYLES
// ----------------------------------------------------------------------------
// When "Show Variables" mode is enabled, variables appear as badges
// instead of showing their resolved content
// ----------------------------------------------------------------------------

.embedded-var-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem; // gap-1
  margin-left: 0.25rem; // mx-1
  margin-right: 0.25rem;
  
  // Badge-specific styling
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; // font-mono
  font-size: 0.75rem; // text-xs
}

// String badge variant
.embedded-var-badge-string {
  @extend .embedded-var-badge;
  background-color: tint($string-var-color, 80%);
  color: $string-text-color;
  border-color: $string-var-color;
  
  &:hover {
    background-color: tint($string-var-color, 70%);
  }
}

// Conditional badge variant
.embedded-var-badge-conditional {
  @extend .embedded-var-badge;
  background-color: tint($conditional-var-color, 80%);
  color: $conditional-text-color;
  border-color: $conditional-var-color;
  
  &:hover {
    background-color: tint($conditional-var-color, 70%);
  }
}

// ----------------------------------------------------------------------------
// USAGE NOTES
// ----------------------------------------------------------------------------
// To use these styles in your component:
//
// 1. Import this SCSS file in your component or global styles
// 2. Apply the appropriate classes:
//    - For string variables: .embedded-var .embedded-var-string-{0-4}
//    - For conditional variables: .embedded-var .embedded-var-conditional-{0-4}
//    - For badge mode: .embedded-var-badge-{string|conditional}
//
// Example:
//   <span className="embedded-var embedded-var-string-0">
//     Variable content here
//   </span>
//
// IMPORTANT: The depth classes (0-4) are based on SAME-TYPE nesting depth:
// - Depth 0: Base color (no tinting) - used when variable is first of its type
// - Depth 1-4: Progressive tinting - used when same type is nested within itself
// - When a string variable is nested in a conditional variable (or vice versa), 
//   the depth resets to 0 because the type changed
//
// Example nesting:
//   Parent string (no color) >
//     String var (depth 0) >
//       Conditional var (depth 0, type changed) >
//         Conditional var (depth 1, same type) >
//           String var (depth 0, type changed) >
//             String var (depth 1, same type) >
//               String var (depth 2, same type)
// ----------------------------------------------------------------------------

